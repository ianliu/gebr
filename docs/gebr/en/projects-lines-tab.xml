<?xml version="1.0" encoding="utf-8"?>

<section
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  lang="en"
  version="5.0"
  xml:id="project_line">

  <title>The <guilabel>Projects and Lines</guilabel> tab</title>
  <para>The tab <guilabel>Projects and Lines</guilabel> is splitted up
    in three parts: toolbar, list of Projects/Lines and
    Details.</para>

    <figure id="sample_project_line_tab">
      <title>Projects and Line tab</title>
      <mediaobject>
        <caption>Screenshot of the <guilabel>Projects and
            Lines</guilabel> tab.</caption>
        <imageobject>
          <imagedata fileref="../images/janela_principal_1.png" />
        </imageobject>
      </mediaobject>
    </figure>
    
  <para>The toolbar remains right below the tabs and has seven buttons, which
    allows you to:</para>
  <itemizedlist>
    <listitem>
      <para>
        <link linkend="projects_lines_create_projects">Create a Project</link>,
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="projects_lines_create_lines">Create a
        Line</link>,
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="projects_lines_delete">Delete Projects
        and/or Lines</link>,
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="projects_lines_edit_properties">Edit basic
        properties of a Project or Line</link>,
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="projects_lines_import">Import a Project
        or a Line</link>,
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="projects_lines_export">Export Projects
          or Lines</link>.
      </para>
    </listitem>
  </itemizedlist>

    <para>The right-side panel shows details about the selected
    element (a Project or a Line) and is slightly different depending
    the context. Despite the nature of the selected element, there is
    two buttons at the bottom of the <guilabel>Details</guilabel>
    frame:</para>

  <itemizedlist>
    <listitem>
      <para>
        <link linkend="projects_lines_edit_comments_project">Edit comments,</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="projects_lines_view_report_project">View Report.</link>
      </para>
    </listitem>
  </itemizedlist>

  <tip>
    <para>Try using a 
      <emphasis>context menu</emphasis> instead of the buttons on the
      toolbar. To do so,
      <emphasis>right-click</emphasis> on one of the Projects or Lines
      you have created.  Notice that many commands can be found in
      this context menu. For certain cases this method is
      even <emphasis>easier and faster</emphasis> then using the
      toolbar buttons.</para>
  </tip>

  <section xml:id="projects_lines_create_projects">
    <title>Creating a Project</title>

    <para>The steps to create a Project are:</para>
    <procedure>
      <step>Select the tab 
        <guilabel>Projects and Lines</guilabel>.
      </step>
      <step>Left-click on 
          <guiicon>
            <inlinemediaobject>
              <imageobject>
                <imagedata fileref="../../common-images/botao_criar_projeto.png" />
              </imageobject>
            </inlinemediaobject>
        </guiicon>
      </step>
      <step>In the 
          <guilabel>Project properties</guilabel> dialog box, fill in the Project's 
          <emphasis>title</emphasis> (for example, 
          <userinput>My First Project</userinput>).
      </step>
      <step>You can also give a brief 
          <guilabel>Description</guilabel> of the Project, the 
          <guilabel>Author</guilabel> and an 
          <guilabel>e-mail</guilabel> address.
      </step>
      <step>Click <guibutton>OK</guibutton>.
      </step>
    </procedure>
    <figure>
      <title>Project's properties dialog box</title>
      <mediaobject>
        <caption>In the Project's properties dialog box you can edit
          the Title, Description, Author and Email.</caption>
        <imageobject>
          <imagedata fileref="../images/janela_properties_project.png" />
        </imageobject>
      </mediaobject>
    </figure>

    <para>The Project title will appear on the left side of GêBR's
      main window
      (see <xref linkend="sample_project_line_tab">Figure</xref>). Information
      about the Project is shown in the
      <guilabel>Details</guilabel> panel on the right hand side of
      GêBR's main window. Notice that some of this information comes
      from what you inserted in the
      <guilabel>Project 'New Project' properties</guilabel> dialog box
      when you created the Project. Details such as creation date and
      modified date are automatically generated by GêBR.</para>

  </section>

  <section xml:id="projects_lines_create_lines">
    <title>Creating a Line</title>

    <para>To create lines GêBR must be connected to a Maestro (see
      <xref linkend="additional_features_maestro_servers_configuration"/>). Otherwise,
      GêBR would not be able to submitted them for execution, since
      this is done through the Maestro's intervenience.</para>

    <para>Once there are Projects, and GêBR is connected to a Maestro,
    you can create Lines. To add a new Line to a Project follow the
    steps:</para>
    <procedure>
      <step>Select a target Project or a Line of the target
	Project (see
	<xref linkend="projects_lines_create_projects"/>);
      </step>
      <step>Click on the button 
        <guiicon>
          <inlinemediaobject>
            <imageobject>
              <imagedata fileref="../../common-images/botao_criar_linha.png" />
            </imageobject>
          </inlinemediaobject>
        </guiicon>;
      </step>
      <step>An assistant dialog will appear to guide the user through
	  the remaining steps.
      </step>
    </procedure>

    <para>Through an assistant dialog, the user will be instructed to
      fill in the following information:</para>
    <itemizedlist>
      <listitem><para><emphasis>Basic properties of the Line</emphasis>, which are
	<emphasis>Title</emphasis>, 
	<emphasis>Description</emphasis>,
	<emphasis>Author</emphasis> and his or her
	<emphasis>e-mail</emphasis> address.</para>
      </listitem>
      
      <listitem><para><emphasis>The BASE path</emphasis>: a top
      directory where most files referred in the Line should be placed
      (see <xref linkend="projects_lines_line_paths" />).</para>
      </listitem>
      
      <listitem><para><emphasis>The IMPORT path</emphasis>: a
	  directory used to easily find files outside the BASE
	  directory.</para>
      </listitem>
    </itemizedlist>

    <para>After creating a Line, the settings of the Line will be
      shown in the <guilabel>Details</guilabel> panel, on the right of
      the main window.
    </para>
    
    <para>There is no limit for the number of Projects and Lines in
      GêBR. You can create as many as you want.
    </para>

    <para>GêBR allows collapsing or expanding the view of the
    Projects. When collapsed, the Lines of a Project are hidden. When
    the Project is expanded, the Lines become visible. To collapse the
    view, click on the
    icon <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_expandido.png"/></imageobject></inlinemediaobject></guiicon>
    on the left side of the project's name. To expand, click on the
    icon <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_colapsado.png"/></imageobject></inlinemediaobject></guiicon>.</para>
  </section>

  <section xml:id="projects_lines_delete">
    <title>Deleting a Project or a Line</title>

    <para>To remove a Line or Project select the Project or Line then left-click on 
      <guiicon>
	<inlinemediaobject>
	  <imageobject>
	    <imagedata fileref="../../common-images/botao_apagar_projeto.png" />
	  </imageobject>
	</inlinemediaobject>
      </guiicon>.</para>

    <para>When you delete a Line you are also deleting all of its
      Flows.</para>

    <note>
      <para>To delete a Project you must first delete all of its
	Lines. A Project can only be deleted if it is Empty (no
	lines).</para>
    </note>
  </section>
  
  <section xml:id="projects_lines_edit_properties">
    <title>Editing properties</title>
		<para>The same settings performed during the creation
			of a Project or Line can be altered through
			the Properties Editing.</para>
    <para>To edit Project's or Line's properties, first select the Project or Line and then
      click on the button 
      <guiicon>
        <inlinemediaobject>
          <imageobject>
            <imagedata fileref="../../common-images/botao_editar_propriedades_projeto.png" />
          </imageobject>
        </inlinemediaobject>
    </guiicon>.</para>
  </section>

  <section xml:id="projects_lines_line_paths">
    <title>Important folders of a Line</title>

    <para>To better manage all files read or created during the
      processing of a data, GêBR defines a directory structure to
      store them. This structure is defined by a top directory, known
      as BASE, and few other nested standard directories.</para>

    <para>For instance, if the home folder of the user is
    '/home/john', setting the BASE to '/home/john/GeBR/MyFirstLine/',
    will have the effect to also define the following
    directories:</para>
      <table>
	<tbody>
	  <tr>
	    <td>HOME: </td>
	    <td> /home/john/</td>
	  </tr>
	  <tr>
	    <td>BASE: </td>
	    <td> /home/john/GeBR/MyFirstLine/</td>
	  </tr>
	  <tr>
	    <td>DATA: </td>
	    <td>/home/john/GeBR/MyFirstLine/data/</td>
	  </tr>
	  <tr>
	    <td>TMP: </td>
	    <td>/home/john/GeBR/MyFirstLine/tmp/</td>
	  </tr>
	  <tr>
	    <td>EXPORT: </td>
	    <td>/home/john/GeBR/MyFirstLine/export/</td>
	  </tr>
	  <tr>
	    <td>TABLE: </td>
	    <td>/home/john/GeBR/MyFirstLine/table/</td>
	  </tr>
	  <tr>
	    <td>MISC: </td>
	    <td>/home/john/GeBR/MyFirstLine/custom/</td>
	  </tr>
	</tbody>
      </table>

      <para>
      This set of folders can help you manage the data related to this
      Line (see <xref linkend="flow_editor_edit_input_output"/>).
      </para>

      <important>
	<para>Remember that the processing takes place at the working
	  machines. So, the directory structure describe above will be
	  created there. In case the working machine is different
	  from the local machine, where the GêBR interface is running,
	  the user will not see the created directories by browsing the
	  local machine's filesystem.</para>
	<para>To be able to browse files in these directory, the
          <emphasis>remote browse</emphasis> feature must be enabled
          in the Maestro of the Line (see
          <xref linkend="flow_editor_remote_browsing"/>).</para>
      </important>

      <note><para>Although it is not mandatory to adhere to this
	  structure, it is highly recommended to do so.</para></note>

  </section>

  <section xml:id="projects_lines_change_the_maestro_of_a_line">
    <title>Changing the Maestro of a Line</title>

    <para>GêBR supports only one connected Maestro at time. However,
    the user may have more than one Maestro at his or her
    disposal.</para>

    <para>Whenever a Maestro is connected, all Lines associates to
      other Maestros will be unavailable for edition. The user can
      however migrate a Line from its original Maestro to the
      connected one. To do so, the Line has to be selected. In
      the <guilabel>Details</guilabel> panel, an icon in the upper
      left corner indicates whether the Maestro defined for the Line
      is connected or not. In case the original Maestro is not the
      connect one, by clicking over that icon, GêBR will offer two
      options:</para>

    <itemizedlist>
      <listitem>
	<para>disconnect from the current Maestro and connect
	  to the Maestro associated to the Line;  </para>
      </listitem>
      <listitem>
	<para>dissociate the Line from its original Maestro and
	  associate it to the connected Maestro.</para>
      </listitem>
    </itemizedlist>

    <figure>
      <title>Dialog for Lines from disconnected Maestros</title>
    <mediaobject>
      <caption>Options available when you want to edit/run a Line
      associated to a disconnected Maestro.</caption>
      <imageobject>
	<imagedata fileref="../images/GeBR_projects_lines_change_of_maestro2.png" />
      </imageobject>
    </mediaobject>
    </figure>

  </section>

  <important>
    <para>When a Line is migrated from one Maestro to another, all
    data in the BASE directory and in its childs will remain in the
    working servers of the original Maestro.
    </para>
  </important>

  <section xml:id="projects_lines_import">
    <title>Importing a Project or a Line</title>
    <para>In GêBR you can import Projects or Lines that were previously exported 
      (<xref linkend="projects_lines_export" />). To do so:</para>
    <procedure>
      <step>
	<para>Click on the button 
	  <guiicon>
	    <inlinemediaobject>
	      <imageobject>
		<imagedata fileref="../../common-images/botao_importar_projeto.png" />
	      </imageobject>
	    </inlinemediaobject>
	</guiicon></para>
      </step>
      <step>
	<para>Select the Project or Line you want to import at window 
	  <guilabel>Choose Project/Line to open</guilabel>. Only files with extension 
	  <filename class="extension">prjz</filename> or 
	  <filename class="extension">lnez</filename> will be shown.</para>
      </step>
      <step>
	<para>Click at button 
	  <guibutton>Open</guibutton>.</para>
      </step>
    </procedure>
    <para>The imported project is added to the list of projects, found
      on the left of the main window. An imported Line joins with the other
      Lines of the Project that was selected when the 
      Line was imported, if they exist. In both cases the imported item is identified
      with the suffix
      <emphasis role="bold">Imported</emphasis>.</para>

    <note>
      <para>In GêBR, Lines may only exist inside a Project (see this
	concept in
	<xref linkend="projects_lines_create_lines"/>). Therefore to
	import a Line you must first select an existing Project, or
	create a new.
      </para>
    </note>
  </section>

  <section xml:id="projects_lines_export">
    <title>Exporting a Project or a Line</title>

    <para>Although GêBR continuously saves all data, sometimes is
      desirable to have copies of your Projects and Lines in a file
      (for example, to share with others or to make backups). To
      export a Project or a Line:</para>
    <procedure>
      <step>
	<para>Select the Line or Project you wish to save.</para>
      </step>
      <step>
	<para>Left-click on 
	  <guiicon>
	    <inlinemediaobject>
	      <imageobject>
		<imagedata fileref="../../common-images/botao_exportar_projeto.png" />
	      </imageobject>
	    </inlinemediaobject>
	</guiicon>.</para>
      </step>
      <step>
	<para>A dialog box will appear and there you can 
	  <guilabel>choose the name of the file that will be saved</guilabel>; when you select a directory
	  and type the file name, GêBR determines the extension automatically, 
	  <filename class="extension">.prjz</filename> for Projects or 
	  <filename class="extension">.lnez</filename> for Lines.</para>
      </step>
      <step>
	<para>Left-click on 
	  <guibutton>Save</guibutton>.</para>
      </step>
    </procedure>
  </section>

  <section xml:id="projects_lines_edit_comments_project">
    <title>Editing comments</title>

    <para>You can add comments on the report of a Project or a Line.  To
      do so, follow the steps:</para>

    <procedure>
      <step>
	<para>Left-click on 
	  <guibutton>Edit comments</guibutton>, which is located just below 
	  <guilabel>Details</guilabel>, in the 
	  <guilabel>Project's properties</guilabel> or 
	  <guilabel>Line's Properties</guilabel> dialog box.</para>
      </step>
      <step>
	<para>Fill in your comment in the text editor that appeared, when you have finished save
	  your comment then close the editor.</para>
	<para>In this editor you can save, print and pre-visualize your comment(s) by pressing
	  one of the icons in the tool bar, or by using the editors menu.</para>
      </step>
    </procedure>
    <figure>
      <title>Built-in report editor</title>
      <mediaobject>
	<caption>The comment editor window.</caption>
	<imageobject>
	  <imagedata fileref="../images/janela_comentarios_de_linha.png" />
	</imageobject>
      </mediaobject>
    </figure>
    
  </section>

  <section xml:id="projects_lines_view_report_project">
    <title>View the report</title>

    <para>As explained in the above section, you can edit a report
      containing additional information about the Project or Line. To
      view the report left-click on View Report, found at the bottom
      of the <guilabel>Details</guilabel> box, which is on the right
      side of the main window.</para>

    <para>After clicking on <guilabel>View Report</guilabel>, a window
    will appear where you can:</para>

    <procedure>
      <step>
	<para>Save;</para>
      </step>
      <step>
	<para>Print the report.</para>
      </step>
    </procedure>
    <para>In the menu Options you can:</para>
    <procedure>
      <step>
	<para>Include your comments;</para>
      </step>
      <step>
	<para>Include the Flow's report;</para>
      </step>
      <step>
	<para>Configure the parameter table pertaining to the Flow's
	programs;</para>
      </step>
      <step>
	<para>Choose the presentation style of the report, as well as
	  include other styles.</para>
      </step>
    </procedure>

    <figure>
      <title>Report view</title>
      <mediaobject>
	<caption>In the view report window, you can print or save to a
	  file this report. In the options menu, as is shown above,
	  you can include: your comments, the Flow's report, the
	  parameter table and choose from a few pre-defined styles for
	  the report.</caption>
	<imageobject>
	  <imagedata fileref="../images/janela_visualizar_relatorio.png" />
	</imageobject>
      </mediaobject>
    </figure>

    <para><xref linkend="flows_browser_view_report_flow" /> explains
      in greater detail the View Report tool for Flows, which is very
      similar to the Line's and Project's View Report except that in
      this one you can add the Flow's report.</para>

  </section>
</section>
