<?xml version="1.0" encoding="utf-8"?>

<chapter
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  lang="en"
  version="5.0"
  xml:id="project_line">

  <title>The <guilabel>Projects and Lines</guilabel> tab</title>

	<para>
		Projects and lines are the organizer entities and are managed in
		the <guilabel>Projects and Lines</guilabel> tab. Seismic processing
		lines can be created and manipulated here. Lines can be grouped in
		projects, for sake of organization. The information presented in the 
		<guilabel>Flows</guilabel> tab depends on the line selected here.
	</para>

  <figure id="sample_project_line_tab">
    <title>Projects and Lines tab</title>
    <mediaobject>
      <caption>Screenshot of the <guilabel>Projects and
          Lines</guilabel> tab.
				The right-hand side of the screen shows the
				details of the selected item, like its name, description and creation
				date.</caption>
      <imageobject>
				<imagedata fileref="../images/GeBR_projects_lines_tab.png"  contentwidth="729px" contentdepth="509px" />
      </imageobject>
    </mediaobject>
  </figure>

  <tip>
    <para>Try using a <emphasis>context menu</emphasis> instead of the buttons
      on the toolbar. To do so, <emphasis>right-click</emphasis> on one of the
      projects or lines which has already been created. Notice that many
      commands can be found in this context menu. For certain cases this method
      is even <emphasis>easier and faster</emphasis> then using the toolbar
      buttons.</para>
  </tip>

  <section xml:id="projects_lines_create_projects_and_lines">
    <title>Creating projects and lines</title>

    <para>The
       button <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_criar_projeto.png"
       /></imageobject></inlinemediaobject></guiicon> creates a
       project. The title and description of the project, besides
       user's email are requested in the creation. Such basic
       information can be further edited through the edit
       button <guiicon><inlinemediaobject><imageobject>
       <imagedata fileref="../../common-images/botao_editar_propriedades_projeto.png"
       /></imageobject></inlinemediaobject></guiicon>.</para>

    <para>The project will appear on the left side of the window
      (see <xref linkend="sample_project_line_tab">Figure</xref>). Information
      about the project is shown on the right hand side of GêBR's main
      window.  Note that some of this information comes from what was
      previously specified. Details such as creation date and modified
      date are automatically generated by GêBR.</para>

    <para>The button
        <guiicon>
          <inlinemediaobject>
            <imageobject>
              <imagedata fileref="../../common-images/botao_criar_linha.png" />
            </imageobject>
          </inlinemediaobject>
        </guiicon>
        creates a line. The information belew will be requested to complete the
        operation:</para>

    <itemizedlist>
      <listitem>
        <para><emphasis>Basic properties</emphasis> of the line, like
          <emphasis>title</emphasis>, <emphasis>description</emphasis>,
          <emphasis>author</emphasis>, and <emphasis>e-mail</emphasis>
          address (they can be further edited through the button <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_editar_propriedades_projeto.png"
          /></imageobject></inlinemediaobject></guiicon>);</para>
      </listitem>

      <listitem>
        <para>The <emphasis>BASE</emphasis><indexterm><primary>BASE</primary></indexterm>
          path is a directory where most of the files referred in the
          line's flows should be placed (see
          <xref linkend="projects_lines_line_paths" />);</para>
      </listitem>

      <listitem>
        <para>The <emphasis>IMPORT</emphasis><indexterm><primary>IMPORT</primary></indexterm>
          path is a directory used to easily find files outside the BASE
          directory.</para>
      </listitem>
    </itemizedlist>

    <para>This information is aided by an assistant dialog. When the
	assistant is completed, the line will be created and shown as
	part of the selected project. Like the project's settings, the
	line's settings are exhibited on the right side of GêBR's
	window.</para>

    <para>To create lines, GêBR must be connected to a maestro (see
      <xref linkend="additional_features_maestro_servers_configuration"/>). Otherwise,
      GêBR will not be able to submit flows for running, since this is
      done through the maestro intervenience.</para>

  </section>

  <section xml:id="projects_lines_delete">
    <title>Deleting projects or lines</title>

    <para>To delete a line, select it and then left-click on
			<guiicon><inlinemediaobject><imageobject>
						<imagedata fileref="../../common-images/botao_apagar_projeto.png" />
		</imageobject></inlinemediaobject></guiicon>.</para>

    <warning>
      <para>When a line is deleted all its flows are also deleted. This
        operation cannot be reverted.</para>
    </warning>

    <para>To delete a project, it must not contain lines, so it is
      necessary to delete them first, and then proceed to the project. This is
      a protection to avoid miss-clicking the delete button.</para>
  </section>
  
  
  <section xml:id="projects_lines_line_paths">
    <title>Important folders of a line</title>

    <para>GêBR defines a directory structure to aid in the task of managing the
      data associated to a set of flows. This structure is defined by a top
      directory, known as
      BASE<indexterm><primary>BASE</primary></indexterm>, and few other nested
      standard directories. They are:</para>
    <informaltable>
      <tbody>
        <tr>
          <td>BASE:<indexterm><primary>BASE</primary></indexterm>  </td>
          <td>is the top directory where most of the files referred in
          the line should be. All directories below are nested in the
          BASE.</td>
        </tr>
        <tr>
          <td>DATA:<indexterm><primary>DATA</primary></indexterm> </td>
          <td>is the suggested directory to store all intermediate data
          files produced during the processing of the line.</td>
        </tr>
        <tr>
          <td>TMP:<indexterm><primary>TMP</primary></indexterm> </td>
          <td>is the suggested directory to keep temporary and
          disposable files.</td>
        </tr>
        <tr>
          <td>EXPORT:<indexterm><primary>EXPORT</primary></indexterm> </td>
          <td>is the suggested directory to place exporting data, not
          suitable to futher processing, like figures.</td>
        </tr>
        <tr>
          <td>TABLE:<indexterm><primary>TABLE</primary></indexterm> </td>
          <td>is the suggested directory to store tabular data.</td>
        </tr>
        <tr>
          <td>MISC:<indexterm><primary>MISC</primary></indexterm></td>
          <td>is employed to store files at convenience of the user.</td>
        </tr>
      </tbody>
    </informaltable>

		<para>Other important folders are the HOME and IMPORT. HOME is 
			automatically set to the path of the user area. The IMPORT, unlike
			the previous
			mentioned folders, is not associated to the BASE path
			and can be independently set.
		</para>

		<para>For instance, suppose we are going to set the important
			folders of a line. The IMPORT is totally independent and
			can be set anywhere, e.g., <emphasis>/tmp/data</emphasis>.
			If the home folder is <emphasis>/home/john/</emphasis>,
			the BASE path must be set inside /home/john/.
			Taking this into consideration, and setting the BASE path to
			<emphasis>/home/john/GeBR/MyFirstLine/</emphasis>, this is
			going to be the directories structure associated
			to the current line:
			</para>

    <informaltable>
      <tbody>
        <tr>
          <td>HOME:<indexterm><primary>HOME</primary></indexterm> </td>
          <td>/home/john/</td>
        </tr>
        <tr>
          <td>IMPORT: </td>
					<td>/tmp/data/</td>
        </tr>
        <tr>
          <td>BASE: </td>
          <td>/home/john/GeBR/MyFirstLine/</td>
        </tr>
        <tr>
          <td>DATA:<indexterm><primary>DATA</primary></indexterm> </td>
          <td>/home/john/GeBR/MyFirstLine/data/</td>
        </tr>
        <tr>
          <td>TMP:<indexterm><primary>TMP</primary></indexterm> </td>
          <td>/home/john/GeBR/MyFirstLine/tmp/</td>
        </tr>
        <tr>
          <td>EXPORT:<indexterm><primary>EXPORT</primary></indexterm> </td>
          <td>/home/john/GeBR/MyFirstLine/export/</td>
        </tr>
        <tr>
          <td>TABLE:<indexterm><primary>TABLE</primary></indexterm> </td>
          <td>/home/john/GeBR/MyFirstLine/table/</td>
        </tr>
        <tr>
          <td>MISC:<indexterm><primary>MISC</primary></indexterm></td>
          <td>/home/john/GeBR/MyFirstLine/custom/</td>
        </tr>
      </tbody>
    </informaltable>

    <para>
      This standard directory structure eases the task of managing the
      data related to lines. In the input/ouput/log fields, this
      feature can be used by embracing them in angle bracktes (for
      instance, &lt;BASE&gt;). For more information, consult
      <xref linkend="flows_edit_input_output"/>.
    </para>

    <important>
      <para>Remember that the processing takes place at the 
        processing node<indexterm><primary>Processing nodes</primary></indexterm>.
        The directory structure described above will be created there. This
        means that these directories will not be present on the local machine
        <emphasis>if</emphasis> the node is a remote machine.</para>

      <para>To be able to browse files in these directory, the
        <emphasis>remote browse</emphasis><indexterm><primary>Remote
        browsing</primary></indexterm> feature must be enabled in the
        maestro<indexterm><primary>Maestro</primary></indexterm> of
        the line (see
        <xref linkend="technical_aspects_remote_browsing"/>).</para>
    </important>

    <note><para>Although it is not mandatory to adhere to this
        structure, it is highly recommended to do so.</para></note>
  </section>

  <section xml:id="projects_lines_change_the_maestro_of_a_line">
    <title>Changing the maestro of a line</title>

    <para>GêBR supports only one connected
      maestro<indexterm><primary>Maestro</primary></indexterm> at
      time. However, there may be several maestros at disposal, one for the
      University A and another for University B, for example.</para>

    <para>Whenever a maestro is connected, all lines associates to other
      maestros will be unavailable for edition. However, a line can be migrated
      from its original maestro to the connected one. To do so, the line must
      be selected. In the right-hand side panel, an icon in the upper left
      corner indicates whether the maestro defined for the line is connected or
      not. In case the original maestro is not the connected one, by clicking
      over that icon, GêBR will offer two options:</para>

    <itemizedlist>
      <listitem>
        <para>disconnect from the current maestro and connect
          to the maestro associated to the line; or</para>
      </listitem>
      <listitem>
        <para>dissociate the line from its original maestro and
          associate it to the connected maestro.</para>
      </listitem>
    </itemizedlist>

    <important>
      <para>Whenever a line is migrated from one maestro to another, all data
        in the BASE<indexterm><primary>BASE</primary></indexterm> directory and
        in its children will remain in the nodes of the original
        maestro.</para>
    </important>

    <figure>
      <title>Dialog for lines from disconnected maestros</title>
      <mediaobject>
        <caption>Options available when it's desired to edit/run a line
          associated to a disconnected maestro.</caption>
        <imageobject><imagedata fileref="../images/GeBR_projects_lines_change_of_maestro2.png"
						contentwidth="427px"
						contentdepth="293px"
						/></imageobject></mediaobject></figure>
  </section>

  <section xml:id="projects_lines_import">
    <title>Exporting and importing projects or lines</title>


    <para>Although GêBR continuously saves all data, sometimes it is
      desirable to have copies of projects and/or lines in a file (for
      example, to share them with others or to make
      backups). To <emphasis>export</emphasis> a project or a
      line:</para>

    <procedure>
      <step>
        <para>Select the line or project that that will be saved;</para>
      </step>
      <step>
        <para>Left-click on
          <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_exportar_projeto.png" /></imageobject></inlinemediaobject></guiicon>;</para>
      </step>
      <step>
        <para>A dialog will be shown. Choose a directory and a name for the
          file;</para>
      </step>
      <step>
        <para>Left-click on the
          <guibutton>Save</guibutton> button to conclude the export.</para>
      </step>
    </procedure>

    <tip>
      <para>
        GêBR determines the extension automatically, i.e.,
        <filename class="extension">.prjx</filename> for projects and
        <filename class="extension">.lnex</filename> for lines.
      </para>
    </tip>


    <para>To <emphasis>import</emphasis> projects or lines
      that were previously exported follow the steps:</para>

    <procedure>
      <step>
        <para>Click on the button 
          <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_importar_projeto.png" /></imageobject></inlinemediaobject></guiicon>;</para>
      </step>
      <step>
        <para>Select the desired project or line to import in the dialog that
          appeared.  Only files with extension
          <filename class="extension">prjz</filename>, <filename class="extension">prjx</filename>,
          <filename class="extension">lnez</filename> or 
          <filename class="extension">lnex</filename> will be shown;</para>
      </step>
      <step>
        <para>Click on the <guibutton>Open</guibutton> button.</para>
      </step>
    </procedure>

    <para>An imported project is added to the list of projects, while an
      imported line joins the other lines of project that was selected prior to
      this process.  In both cases the imported item is identified with the
      suffix <emphasis role="bold">Imported</emphasis>.</para>

    <note>
      <para>In GêBR, lines may only exist inside a project
	(see <xref linkend="concepts_elements"/>). Therefore to import
	a line first select an existing project, or create a new one.
      </para>
    </note>
  </section>

  <section xml:id="projects_lines_report">
    <title>Report of a project or a line</title>

    <para>
      Projects and lines can be commented and have an automatic report
      <indexterm><primary>Report</primary><secondary>of a project</secondary></indexterm>
      <indexterm><primary>Report</primary><secondary>of a line</secondary></indexterm>
      generation. To edit their commentaries, follow the steps:</para>

    <procedure>
      <step>
        <para>Choose a project or line;</para>
      </step>
      <step>
        <para>Click on the <guibutton>More</guibutton> button on the toolbar;</para>
      </step>
      <step>
        <para>Choose <guilabel>Edit Comments</guilabel>;</para>
      </step>
      <step>
        <para>Fill in some comment in the text editor that is presented;</para>
      </step>
      <step>
        <para>When finished, save and close the editor.</para>
      </step>
    </procedure>

    <tip>
      <para>You can print the report by clicking
        <menuchoice>
          <guimenu>File</guimenu>
          <guisubmenu>Print</guisubmenu>
        </menuchoice>
      </para>
    </tip>

    <figure>
      <title>Built-in comment editor</title>
      <mediaobject>
        <caption>The comment editor window.</caption>
        <imageobject>
					<imagedata fileref="../images/GeBR_line_comments.png"
						contentwidth="556px" contentdepth="336px" />
        </imageobject>
      </mediaobject>
    </figure>
    

		<para>The report can be visualized by clicking over
          <menuchoice>
            <guimenu>More</guimenu>
            <guisubmenu>View Report</guisubmenu>
          </menuchoice>.</para>

    <figure>
      <title>View Report</title>
      <mediaobject>
				<caption>The line <guilabel>report</guilabel> contains information
					concerning the associated flows and their programs, 
					important folders and variables.</caption>
        <imageobject>
					<imagedata fileref="../images/GeBR_line_report.png"
						contentwidth="779px" contentdepth="591px" />
        </imageobject>
      </mediaobject>
    </figure>
    <para>After clicking on <guilabel>View Report</guilabel>, a window will
      appear showing the generated report for that project or line. This window
      has some functionalities that are mentioned below:</para>

    <variablelist>
      <varlistentry>
        <term>
          <menuchoice>
            <guimenu>Option</guimenu>
            <guisubmenu>Include user's commentary</guisubmenu>
          </menuchoice>
        </term>
        <listitem>
          <para>Include comments for this line into the report;</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>
          <menuchoice>
            <guimenu>Option</guimenu>
            <guisubmenu>Include flow's reports</guisubmenu>
          </menuchoice>
        </term>
        <listitem>
          <para>Include the reports of all flow of this line;</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>
          <menuchoice>
            <guimenu>Option</guimenu>
            <guisubmenu>Include the report of the snapshots of flows;</guisubmenu>
          </menuchoice>
        </term>
        <listitem>
          <para>This option will include reports from all snapshots of all the
            flows that compose this line (see <xref linkend="flows_snapshots"/>);</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>
          <menuchoice>
            <guimenu>Option</guimenu>
            <guisubmenu>Parameter table;</guisubmenu>
          </menuchoice>
        </term>
        <listitem>
          <para>Allows to choose how much information about the parameters will be shown.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>
          <menuchoice>
            <guimenu>Option</guimenu>
            <guisubmenu>Style;</guisubmenu>
          </menuchoice>
        </term>
        <listitem>
          <para>Change the presentation style of the report.</para>
        </listitem>
      </varlistentry>
    </variablelist>

    <figure>
      <title>Report menu</title>
      <mediaobject>
        <caption>GêBR enables the report customization.</caption>
        <imageobject>
					<imagedata fileref="../images/GeBR_line_report_options.png"
						contentwidth="418px" contentdepth="236px" />
        </imageobject>
      </mediaobject>
    </figure>
          
      <note>
        <para>The option to include report of flows' snapshots are
          available on line's and flow's <guilabel>View Report</guilabel>. More
          information about snapshots can be found on section
          <xref linkend="flows_snapshots" />
      	</para>
      </note>
      
  </section>
</chapter>
