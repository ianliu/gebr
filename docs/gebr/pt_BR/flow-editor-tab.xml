<?xml version="1.0" encoding="utf-8" ?>

<section
  xmlns="http://docbook.org/ns/docbook"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  lang="pt_BR"
  version="5.0"
  xml:id="flow-editor-tab">

  <title>A aba 
    <guilabel>Editor de Fluxo</guilabel></title>
    <para>Para criar um fluxo, siga as instruções em <xref linkend="creating_flows" />.
    </para>
  <para>Agora que já sabemos como adicionar programas ao fluxo, precisamos configurá-los. Vejamos então as demais
    ferramentas da aba <guilabel>Editor de Fluxo</guilabel>:</para>
  <itemizedlist>
    <listitem>
      <para>
        <link linkend="copiar_programa_para_area_de_transferencia">Copiar programa(s) selecionado(s) para a área de transferência</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="sec_3_3_2">Colar programa(s) selecionado(s) da área de transferência</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="sec_3_3_3">Deletar programa</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="editar_parametros_programa">Editar os parâmetros de um programa</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="sec_3_3_5">Mudar o estado de um programa</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="editar_arquivos_entrada_saida_fluxo">Editar arquivos de entrada e saída do fluxo</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="executar_fluxo">Executar um fluxo</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="multi_cores">Velocidade de execução</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="sec_3_2_11">Editar Comentários</link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link linkend="visualizar_relatorio_fluxo">Visualizar Relatório</link>
      </para>
    </listitem>
  </itemizedlist>
  <tip>
    <para>Experimente usar <emphasis>menus de contexto</emphasis> no lugar dos botões de comando. Para
      isso, <emphasis>clique com o botão direito do mouse</emphasis> nos programas que você
      adicionar. Você vai notar que diversos comandos podem ser acionados por este método. Em determinados casos,
      isso é mais <emphasis>fácil e rápido</emphasis> do que usar os botões.</para>
  </tip>
  <section xml:id="copiar_programa_para_area_de_transferencia">
    <title>Copiar programas para a área de transferência</title>
    <para>Da mesma forma que se faz com fluxos (veja a <xref linkend="copiar_fluxos_area_tranferencia"/>), um programa (ou um conjunto de programas) pode ser copiado para a área de
      transferência por meio do
      botão <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_copiar_fluxo.png"/></imageobject></inlinemediaobject></guiicon> ou, mais prático, pelo conhecido atalho
      <keycombo><keycap>Ctrl</keycap><keycap>C</keycap></keycombo>.</para>
    <tip>
      <para>Você pode selecionar vários programas para serem copiados simultaneamente usando 
        <keycombo><keycap>Ctrl</keycap><mousebutton>Clique</mousebutton></keycombo> ou 
        <keycombo><keycap>Shift</keycap><mousebutton>Clique</mousebutton></keycombo>.</para>
    </tip>
  </section>
  <section xml:id="sec_3_3_2">
    <title>Colar programas da área de transferência</title>
    <para>Depois de ter sido selecionado e copiado <xref linkend="copiar_programa_para_area_de_transferencia"/>, um programa (ou
      um conjunto de programas) pode ser colado por meio do
      botão <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_colar_fluxo.png"/></imageobject></inlinemediaobject></guiicon> ou, mais prático, pelo conhecido atalho
      <keycombo><keycap>Ctrl</keycap><keycap>V</keycap></keycombo>.</para>
    <tip>
      <para>O programa (ou conjunto de programas) copiado anteriormente para a área de transferência pode ser colado
        em <emphasis>qualquer fluxo</emphasis> existente, e não só no fluxo de origem. Basta alternar
        para a aba <guilabel>Fluxos</guilabel>, selecionar o fluxo desejado, voltar para a aba <guilabel>Editor de
          Fluxo</guilabel> e colar o(s) programas(s).</para>
    </tip>
  </section>
  <section xml:id="sec_3_3_3">
    <title>Deletar programas</title>
    <para>Para excluir um programa (ou um conjunto de programas), selecione-o e clique no
      botão <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_apagar_projeto.png"/></imageobject></inlinemediaobject></guiicon>.</para>
    <tip>
      <para>Você pode selecionar vários programas para serem excluidos simultaneamente usando 
        <keycombo><keycap>Ctrl</keycap><mousebutton>Clique</mousebutton></keycombo> ou 
        <keycombo><keycap>Shift</keycap><mousebutton>Clique</mousebutton></keycombo>.</para>
    </tip>
    <caution>
      <para>A GêBR  <emphasis>não emite aviso</emphasis> antes de deletar programas.</para>
    </caution>
  </section>
  <section xml:id="editar_parametros_programa">
    <title>Editar os parâmetros de um programa</title>
    <para>Para editar os parâmetros de um programa:</para>
    <procedure>
      <step>
        <para>Selecione-o na caixa <guilabel>Sequência de fluxo</guilabel> e clique no
          botão <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_editar_propriedades_projeto.png"/></imageobject></inlinemediaobject></guiicon>, ou dê um clique duplo no programa.</para>
      </step>
      <step>
        <para>Na janela <guilabel>Parâmetros</guilabel>, edite os parâmetros do programa. Note que os parâmetros
          variam bastante de um programa para outro, tanto em quantidade como em tipo.</para>
        <tip>
          <para>Clique no botão <guibutton>Ajuda</guibutton> (canto inferior esquerdo da janela
            <guilabel>Parâmetros</guilabel>) para visualizar a <emphasis>documentação do
              programa</emphasis>. Isso pode ser útil durante a edição de parâmetros.</para>
        </tip>
        <tip>
          <para>Clique no botão <guibutton>Padrão</guibutton> quando quiser retornar para a configuração padrão do
            programa.</para>
        </tip>
      </step>
      <step>
        <para>Clique em <guibutton>OK</guibutton>.</para>
      </step>
    </procedure>
  </section>
  <section xml:id="sec_3_3_5">
    <title>Mudar o estado de um programa</title>
    <para>Após realizar o procedimento da <xref linkend="editar_parametros_programa"/>, note que o programa passa a ser sinalizado
      por <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_configurado.png"/></imageobject></inlinemediaobject></guiicon> em vez
      de <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_nao_configurado.png"/></imageobject></inlinemediaobject></guiicon>. Isso indica que o programa passou do
      estado <emphasis>Não configurado</emphasis> para o
      estado <emphasis>Configurado</emphasis>. Além desses dois estados, um programa pode assumir ainda o
      estado <emphasis>Desabilitado</emphasis>
      (<guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_desabilitado.png"/></imageobject></inlinemediaobject></guiicon>). Você pode alternar entre estes estados de duas maneiras,
      <mousebutton>clique com botão direito</mousebutton> sobre o programa e selecione o estado desejado a partir do menu de contexto ou
      use o atalho <keycombo><keycap>Espaço</keycap></keycombo> para trocar entre os possíveis estados dos programas selecionados.</para>
    <tip>
      <para>Você pode mudar o estado de vários programas simultaneamente, selecionando-os com 
        <keycombo><keycap>Ctrl</keycap><mousebutton>Clique</mousebutton></keycombo> ou 
        <keycombo><keycap>Shift</keycap><mousebutton>Clique</mousebutton></keycombo>.</para>
    </tip>
    <tip>
      <para>Mudar o estado do programa não altera a configuração dos parâmetros. Você pode alternar com segurança
        entre os estados, os parâmetros serão preservados.</para>
    </tip>
    <important>
      <para>Programas <emphasis>Desabilitados</emphasis>
        (<guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_desabilitado.png"/></imageobject></inlinemediaobject></guiicon>) são ignorados durante a execução do fluxo. Dessa forma, você
        pode <emphasis>habilitar ou desabilitar pedaços de um fluxo</emphasis>, conforme a
        conveniência.</para>
    </important>
  </section>
  <section xml:id="editar_arquivos_entrada_saida_fluxo">
    <title>Editar arquivos de entrada e saída do fluxo</title>
    <para>No exemplo da <xref linkend="creating_flows"/> criamos um fluxo
      muito simples, que não precisava "ler" nenhum arquivo, e que gerava como resultado uma saída de tela. Porém,
      há situações em que o fluxo precisa extrair dados de um arquivo de entrada e gerar como resultado um arquivo
      de saída ou de erro, caso ocorra algum problema durante a execução.</para>
    <para>Para associar arquivos de entrada, saída e erro a um fluxo:</para>
    <figure>
      <mediaobject>
        <caption>Na aba Editor de Fluxo, no campo Sequência de fluxo, edita-se os arquivos de entrada, saída e log para esta
          sequência de Fluxo.</caption>
        <imageobject>
          <imagedata fileref="../images/GeBR_flow_editor_input_file.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <procedure>
      <step>
        <para>Certifique-se de ter selecionado o fluxo e, na aba Editor de Fluxo, no campo Sequência de fluxo,
          pode-se editar os caminhos de entrada, saída e erro através de um clique duplo nos botões. Ver figura: 
        </para>
      </step>
      <step>
        <para>Edite os caminhos ou clique no
          ícone <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_escolher_arquivo.png"/></imageobject></inlinemediaobject></guiicon> e navegue pela janela <guilabel>Escolha um
            arquivo</guilabel>.</para>
      </step>
    </procedure>
    <para>Ao sair da janela 
      <guilabel>Entrada/Saída do fluxo</guilabel>, note que os arquivos de entrada e saída que você associou ao
      fluxo aparecem na caixa <guilabel>Sequência de fluxo</guilabel>, sinalizados com os ícones
      <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_arquivo_entrada.png"/></imageobject></inlinemediaobject></guiicon> e
      <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/icone_arquivo_saida.png"/></imageobject></inlinemediaobject></guiicon>, abaixo e acima dos programas do fluxo (se houver algum).</para>
    <note>
      <para>Se quiser <emphasis>remover um conjunto</emphasis> da lista, selecione-o com
        o <emphasis>botão direito</emphasis> do mouse e clique em
        <guimenuitem>Excluir</guimenuitem>.</para>
    </note>
  </section>
  <section xml:id="executar_fluxo">
    <title>Executar um fluxo</title>
    <para>Para executar o fluxo atual, clique no botão 
      <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_executar_fluxo.png"/></imageobject></inlinemediaobject></guiicon>.</para>
    <para>Por padrão, os fluxos são executados na máquina de origem, identificada automaticamente pela GêBR
      como <emphasis>Servidor local</emphasis>. Entretanto, a GêBR também
      permite <emphasis>executar fluxos em máquinas remotas</emphasis>. Veja mais detalhes sobre
      definição e seleção de servidores em <xref linkend="menu"/>.</para>
    <para>Na aba Editor de Fluxo, ainda que se tenha selecionado vários fluxos na aba Fluxos, ao se clicar no
      botão <guiicon><inlinemediaobject><imageobject><imagedata fileref="../../common-images/botao_executar_fluxo.png"/></imageobject></inlinemediaobject></guiicon> será
      executado apenas o primeiro fluxo selecionado.</para>
    <figure>
      <mediaobject>
	      <caption>Na segundo campo de <guilabel>Executar</guilabel>, você pode selecionar <emphasis>após
	      </emphasis> qual fluxo deseja executar.</caption>
        <imageobject>
          <imagedata fileref="../images/GeBR_flow_editor_queue.png"/>
        </imageobject>
      </mediaobject>
    </figure>
    <para>No momento em que o fluxo começa a ser executado, a GêBR alterna imediatamente para a aba
      <guilabel>Controle de tarefas</guilabel>, que mostra o relatório (<emphasis>log</emphasis>) da execução.</para>
  </section>
  <section xml:id="multi_cores">
    <title>Multiplos processadores</title>
    <para>GêBR otimiza a execução de laços em máquina com múltiplos processadores (cores).</para>
    <para>GêBR tira vantagem dos recursos múltiplos-núcleos das máquinas.
	    A execução de laços repetitivos pode ser otimizado por este recurso. 
	    Se o fluxo tem laços e é paralelizável (i.e., satisfaz os critérios abaixo)
	    então você pode ajustar o número de processadores a serem utilizados.
	    </para>
	    <para>Para ser considerado paralelizável, além de ter um laço, o Fluxo precisa
		    satisfazer um destes critérios:</para>
    <itemizedlist>
      <listitem>O Fluxo não tem arquivo de saída;</listitem>
      <listitem>A saída de cada passo do laço não é entrada de outro passo do laço
        .</listitem>
    </itemizedlist>
    <para>Você pode ajustar o número de processadores a ser utilizado através da barra de ajuste
      .</para>
    <imageobject>
      <imagedata fileref="../images/GeBR_flow_editor_flow_exec_speed.png" />
    </imageobject>
    <para>Cada nível da barra de ajuste corresponde a um número de núcleos utilizado pela tarefa.</para>
  </section>
  <section xml:id="priority_execution">
    <title>Prioridade de execução</title>
    <para>Computadores são multitarefas, o que significa que podem executar várias tarefas
      concorrentemente. Quando muitas tarefas são executadas ao mesmo tempo, o computador 
      se sobrecarrega e diminui seu desempenho. Fluxos de processamento sísmico, em particular,
      exigem muitos recursos das máquinas.</para>
      <para>Para prevenir o sobrecarregamento das máquinas, a GêBR oferece a possibilidade de 
	      executar um fluxo em estado de <guilabel>Baixa prioridade</guilabel>.  </para>
      
    <imageobject>
      <imagedata fileref="../images/GeBR_flow_editor_priority_execution.png" />
    </imageobject>
    <para>Há duas opções: </para>
    <itemizedlist>
      <listitem>Baixa prioridade (o fluxo irá esperar recursos livres para executar
       , de modo a não sobrecarregar o sistema)</listitem>
      <listitem>Alta prioridade (a execução disputará com outros programas ativos 
	      por recursos do sistema)</listitem>
    </itemizedlist>
    <para>Tecnicamente, rodar em modo de "Baixa prioridade" significa reduzir a prioridade de
	    execução da tarefa, algo como dizer ao computador para "esperar outras coisas mais
	    importantes serem executadas primeiro". Este é o caso quando o usuário faz outras
	    coisas enquando processa seus fluxos na GêBR. O modo de "Alta Prioridade"
	    significa que a GêBR terá maior prioridade sobre os outros processos, algo como
	    "Eu quero este processamento da GêBR pronto o mais rápido possível".
    </para>
    <para>
	    Se a GêBR é o único programa sendo executado nos servidores, i.e., não 
	    há competidores por recursos do sistema, então ambos estados correspodem ao
	    mesmo modo.
      </para>
  </section>
  <section xml:id="loop">
    <title>Executando um fluxo múltiplas vezes</title>
    <para>O programa <emphasis>Loop</emphasis> (que pertence a categoria <emphasis>Loops</emphasis>) é tratado de uma maneira especial comparado aos outros programas da GêBR. Vamos ver a seguir
      algumas destas diferenças.</para>
    <para>Ao adicionarmos o programa Loop, nota-se que ele sempre aparece no topo do fluxo, isso ocorre para representar 
      que aquele fluxo será executado repetidamente, de acordo com o preenchimento dos parâmetros do programa (visto na seção <xref linkend="editar_parametros_programa"/>).</para>
    <mediaobject>
      <caption>Na aba Editor de Fluxo, após o programa <emphasis>Loop</emphasis> ser adicionado e configurado.</caption>
      <imageobject>
        <imagedata fileref="../images/GeBR_flow_editor_loop.png"/>
      </imageobject>
    </mediaobject>
    <para>Após o <emphasis>Loop</emphasis> ser adicionado, teremos acesso a uma nova variável, chamada <emphasis>iter</emphasis>, que tem seu valor alterado a cada iteração,
      de acordo com o preenchimento de seus parâmetros.</para>
    <mediaobject>
      <caption>Janela de edição de parâmetros do programa <emphasis>Loop</emphasis>, com um exemplo simples do preenchimento.</caption>
      <imageobject>
        <imagedata fileref="../images/loop_parametros.png"/>
      </imageobject>
    </mediaobject>
    <tip>Maiores informações sobre a variável <emphasis>iter</emphasis> estão disponíveis na seção <xref linkend="variavel_iter"/>.</tip>
  </section>

 <section xml:id="multiple_machines">
    <title>Execução em várias máquinas</title>
    <para>Se a GêBR estiver conectada a várias máquinas (configuração através do
      <xref linkend="servers_configuration" />, e o fluxo for paralelizável (veja 
      abaixo os critérios para um fluxo ser paralelizável), então o usuário tem a
      opção de executar o fluxo de forma distribuída.</para>
    <para>Para ser <emphasis>paralelizável</emphasis>, o fluxo precisa satisfazer um
      destes critérios:</para>
    <itemizedlist>
      <listitem>
        <para>O Fluxo não tem arquivos de saída;</para>
      </listitem>
      <listitem>
        <para>Se existirem arquivos de saída, eles devem ser independentes, i.e., 
          o arquivo de saída de um passo do laço não deve servir de entrada para
          outro passo do laço.</para>
      </listitem>
    </itemizedlist>
    <para>No caso de o fluxo não ser paralelizável, a GêBR irá executar o fluxo na melhor 
      melhor máquina no memomento de execução (GêBR ordena as máquinas baseado na 
      disponibilidade e na velocidade). Numa execução distribuída, é importante distinguir 
      os modos de Prioridade. Quando o fluxo é paralelizável, o fluxo é dividido e 
      distribuído entre as máquinas disponíveis de acordo com sua ordenação).</para>
    <para>Se você deseja executar um fluxo (paralelizado ou não) em um servidor 
      em específico, você pode forçar sua execução indo à aba <guilabel>Editor de
        Fluxo</guilabel> e escolhendo o servidor desejado.</para>
  </section>

</section>
